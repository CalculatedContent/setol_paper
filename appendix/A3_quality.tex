\subsection{Expressing the Layer Quality}
\label{sxn:quality}

In this section, we obtain an approximation expression for the \LayerQualitySquared from the IZ \FreeEnergy for the \GeneralizationError, 
given in \EQN~\ref{eqn:betaIZG_S} in Section~\ref{sxn:matgen_quality_hciz_A}.

For the required \FreeEnergy $\IZFE$, we will use the matrix-generalized Hamiltonian
from \EQN~\ref{eqn:GANHTmatR} for the
\LayerQuality, $\GANMATHT=N(\IM-\OVERLAP)$.
giving a Boltzmann distribution and the corresponding \ThermalAverage.  
Expanding this out, we have
\begin{align}
  \label{eqn:IZFE0}
  -\IZFE =& -  \ln \int d\mu(\mathbf{S}) \exp\left[-\ND\beta  \Trace{\HANHT(\OVERLAP)}  \right] \\
\end{align}
We could also express $\IZFE$ In terms of the matrix-generalized \EffectivePotential $\EPSL(\OVERLAP)$
(\EQN~\ref{eqn:EPSL_mat}), giving
\begin{align}
  -\IZFE =& -  \ln \int d\mu(\mathbf{S}) \exp\left[-\ND\beta N \EPSL(\OVERLAP)  \right] 
\end{align}
In analogy with \EQN~\ref{eqn:Gan_highT}, 
as $\HANHT(\mathbf{R})=M-\OVERLAP$,  write
\begin{align}
-\IZFE  =& -  \ln \int d\mu(\mathbf{S}) \exp\left[-\ND\beta N \operatorname{Tr}[M-\OVERLAP]  \right] 
\end{align}
Using the approximation $\operatorname{Tr}[\OVERLAP]\approx\sqrt{\OLAPSQD}$, we have
\begin{align}
  -\IZFE 
\approx& - \ln \int d\mu(\mathbf{S}) \exp\left[-\ND\beta N(M-\sqrt{\OLAPSQD} ) \right] \\ 
\label{eqn:IZFE1}
=& -  \ln \int d\mu(\mathbf{S}) \exp[-\ND\beta NM]\exp\left[\ND\beta N\sqrt{\OLAPSQD}\right], \\
\label{eqn:IZFE2}
=& -  \ln e^{-\ND\beta NM} \int d\mu(\mathbf{S}) \exp\left[\ND\beta N\sqrt{\OLAPSQD}\right], \\
\label{eqn:IZFE3}
=& -  \ln e^{-\ND\beta NM} - \ln \int d\mu(\mathbf{S}) \exp\left[\ND\beta N\sqrt{\OLAPSQD}\right], \\
\label{eqn:IZFE4}
=& \ND\beta NM - \ln \int d\mu(\mathbf{S}) \exp\left[\ND\beta N\sqrt{\OLAPSQD}\right], 
\end{align}

Notice that, as expected, the Free Energy scales $\IZFE$ as $\ND \times N \times M$, the total number of degrees of freedom of the theory.
\noindent
Since \EQN~\ref{eqn:IZFE0} equals \EQN~\ref{eqn:IZFE1}, we can write the \FreeEnergy in terms of $\OLAPSQD$. From \EQN~\ref{eqn:IZFE4}, 
we can identify a generating function ($\Gamma_{\Q}$) for the layer accuracy, or \Quality.
For example, to compute the average \Quality $\Q$, we would use
\begin{align}
  \label{eqn:IZG_Q}
  \beta\Gamma^{IZ}_{\Q} :=  \ln \int d\mu(\mathbf{S}) \exp\left[\ND\beta N\sqrt{\OLAPSQD}\right],
\end{align}
and to compute the average \Quality (squared) $\QT$, we would use
\begin{align}
    \label{eqn:IZG_QT2}
  \beta\Gamma^{IZ}_{\QT} :=  \ln \int d\mu(\mathbf{S}) \exp\left[\ND\beta N\OLAPSQD\right] .
\end{align}
%Moving forward, we drop the $\QT$ subscript, so $\Gamma^{IZ}=\Gamma^{IZ}_{\QT}$, and we
We have recovered \EQN~\ref{eqn:betaIZG_S}.
We can now also define the \LayerQualitySquared \Hamiltonian as
\begin{equation}
      \label{eqn:HBARE}
  \HH_{\QT}:=\mathbf{R}^{\top}\mathbf{R}
\end{equation}
which is a symmetric operator, as desired.
Consequently, we may also write
\begin{align}
    \label{eqn:IZG_QT3}
  \beta\Gamma^{IZ}_{\QT} :=  \ln \int d\mu(\mathbf{S}) \exp\left[\ND\beta N \operatorname{Tr}[\HH_{\QT}]\right]  .
\end{align}

