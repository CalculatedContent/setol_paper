\usepackage{amsmath}

\hypersetup{
     colorlinks   = true,
     linkcolor    = blue,
     citecolor    = green
}
%SumInt symbol
\usepackage{MnSymbol}

\newcommand{\fix}[1]{\textcolor{red}{#1}}
\newcommand{\comment}[1]{\textcolor{blue}{#1}}
\newcommand{\awk}[1]{\textcolor{green}{#1}}

\newcommand{\argmin}{\text{argmin}}
\newcommand{\Probab}[1]{\mbox{}{\bf{Pr}}\left[#1\right]}
\newcommand{\Expect}[1]{\mbox{}{\bf{E}}\left[#1\right]}
\newcommand{\ExpectBracket}[1]{\mbox{}\langle#1\rangle}
%\newcommand{\Trace}[1]{\mbox{}{\mbox{Tr}}\left[#1\right]}
\newcommand{\Trace}[1]{\mbox{}\operatorname{Tr}\left[#1\right]}

% can pick bracket or mathbbf, with subscript 
%\newcommand{\Expected}[2][]{\mathbb{E}_{#1}\left[#2\right]}
\newcommand{\Expected}[2][]{\left\langle #2 \right\rangle_{#1}}

\newcommand{\LAMBDAPL}{\lambda^{PL}_{min}}
\newcommand{\LAMBDADETX}{\lambda^{\vert detX\vert=1}_{min}}

% Here are two macros for comments.                                                                                                                    
\newcommand{\red}[1]{{\color{red}\sf{#1}}}
\newcommand{\cyan}[1]{{\color{cyan}\sf{#1}}}
\newcommand{\nred}[1]{{\color{red}\sf{[#1]}}}
\newcommand{\ngreen}[1]{{\color{green}\sf{[#1]}}}
\newcommand{\ncyan}[1]{{\color{cyan}\sf{[#1]}}}
\newcommand{\nmove}[1]{{\color{brown}\sf{[#1]}}}




\definecolor{darkgreen}{rgb}{0.05, 0.65, 0.06}
%\newcommand {\charles}[1]{{\color{blue}\sf{[charles: #1]}}}
\newcommand {\charles}[1]{}

%\newcommand {\michael}[1]{{\color{red}\sf{[michael: #1]}}}
%\newcommand {\michaeladdressed}[1]{{\color{brown}\sf{[michaeladdressed: #1]}}}
\newcommand {\michael}[1]{}
\newcommand {\michaeladdressed}[1]{}

%\newcommand {\cformike}[1]{{\color{teal}\sf{[charles: #1]}}}
\newcommand {\cformike}[1]{}

%\newcommand {\chris}[1]{{\color{darkgreen}\sf{[chris: #1]}}}
\newcommand {\chris}[1]{}
%\newcommand {\serena}[1]{{\color{orange}\sf{[charles: #1]}}}

\usepackage[normalem]{ulem}

% MM: xspace may have some issues - do a search on ``space after newcommand latex'' - there is no perfect solution 

\usepackage{xspace}
\newcommand{\TR}{\top}

\newcommand{\SPECTRALNORM}{\texttt{SpectralNorm}\xspace}
\newcommand{\LOGSPECTRALNORM}{\texttt{LogSpectralNorm}\xspace}

\newcommand{\FROBENIUSNORM}{\texttt{LogFrobeniusNorm}\xspace}
\newcommand{\ALPHA}{\texttt{Alpha}\xspace}
\newcommand{\QUALITYOFALPHAFIT}{\texttt{QualityOfAlphaFit}\xspace}
\newcommand{\ALPHAHAT}{\texttt{AlphaHat}\xspace}
\newcommand{\ALPHASHATTENNORM}{\texttt{LogAlphaShattenNorm}\xspace}
\newcommand{\DISTANCEFROMINIT}{\texttt{DistanceFromInit}\xspace}
\newcommand{\TRAININGACCURACY}{\texttt{TrainingAccuracy}\xspace}
\newcommand{\SHARPNESS}{\texttt{Sharpness}\xspace}
\newcommand{\SVDSHARPNESS}{\texttt{SVDSharpness}\xspace}
\newcommand{\SVDSMOOTHING}{\texttt{SVDSmoothing}\xspace}
\newcommand{\TASKONE}{\texttt{Task1}\xspace}
\newcommand{\TASKTWO}{\texttt{Task2}\xspace}
\newcommand{\BASELINE}{\texttt{Baseline}\xspace}

\newcommand{\SVDA}{\texttt{SVD20}\xspace}
\newcommand{\SVDB}{\texttt{SVD40}\xspace}


% weightwatcher metrics
\newcommand{\AVG}{\texttt{Avg.}}
\newcommand{\AVGALPHA}{\langle\alpha\rangle}
\newcommand{\ALPHAHATEQN}{\hat\alpha}
\newcommand{\ALPHAHATLONG}{\alpha\log_{10}\lambda_{max}}
\newcommand{\MAXEVAL}{\lambda_{max}}
\newcommand{\AVGALPHADISTANCE}{\langle D_{KS}\rangle}
\newcommand{\AVGLOGSPECTRALNORM}{\langle\log_{10}\Vert\mathbf{W}\Vert^{2}_{2}\rangle}
\newcommand{\AVGLOGNORM}{\langle\log_{10}\Vert\mathbf{W}\Vert^{2}_{F}\rangle}
\newcommand{\AVGLOGSHATTENNORM}{\langle\log_{10}\Vert\mathbf{W}\Vert^{2\alpha}_{2\alpha}\rangle}
\newcommand{\LAMBDA}{\texttt{TPL-Lambda}}
\newcommand{\RANDDIST}{\texttt{Rand-Distance}}
\newcommand{\INITDIST}{\texttt{Init-Distance}}
\newcommand{\WW}{\texttt{WeightWatcher}\xspace}

\newcommand{\HCIZtext}{\texttt{HCIZ}\xspace}
\newcommand{\SLT}{\texttt{SLT}\xspace}
\newcommand{\RMT}{\texttt{RMT}\xspace}
\newcommand{\HTRMT}{\texttt{HTRMT}\xspace}
\newcommand{\STATMECH}{\texttt{StatMech}\xspace}
\newcommand{\SETOL}{\texttt{SETOL}\xspace}
\newcommand{\SMOG}{\texttt{SMOG}\xspace}
\newcommand{\HTSR}{\texttt{HTSR}\xspace}
\newcommand{\QUANTFIN}{\texttt{QuantFin}\xspace}
\newcommand{\SEMIEMP}{\texttt{SemiEmpirical}\xspace}

\newcommand{\ETPL}{\texttt{E\_TPL}}
\newcommand{\TPL}{\texttt{TPL}}
\newcommand{\PL}{\texttt{PL}}
\newcommand{\PLKS}{\texttt{PL KS}}
\newcommand{\MPSOFTRANK}{\texttt{MP SoftRank}}

\newcommand{\LAMBDAMIN}{\texttt{LAMBDA-MIN}\xspace}
\newcommand{\TRACELOG}{\texttt{TRACE-LOG}\xspace}
\newcommand{\IFA}{\texttt{IFA}\xspace}
\newcommand{\ECS}{\texttt{ECS}\xspace}

\newcommand{\PRETFIDF}{\texttt{PRE TFIDF}}
\newcommand{\TFIDF}{\texttt{TFIDF}}
\newcommand{\POWERLAW}{\texttt{PowerLaw}}

\newcommand{\SHAPE}{\emph{Shape}\xspace}
\newcommand{\SCALE}{\emph{Scale}\xspace}

% IZ Free Energy 
\newcommand{\IZFE}{\beta\mathbf{F}^{IZ}}
% IZ Parition Function
\newcommand{\IZZ}{\beta\mathbf{Z}^{IZ}}



% Average Layer Quality
\newcommand{\Q}{\bar{\mathcal{Q}}}
% Average Layer Quality (Squared
\newcommand{\QT}{\bar{\mathcal{Q}}^{2}}

% Generating Functions
\newcommand{\STG}{\beta\mathbf{\Gamma}^{ST}_{\Q}}
\newcommand{\IZG}{\beta\mathbf{\Gamma}^{IZ}_{\QT}}
\newcommand{\IZGINF}{\beta\mathbf{\Gamma}^{IZ}_{\QT,N\gg 1}}


% Tanaka's (Norm) Generat\ing Functons / Generalized Norms
\newcommand{\GN}{\mathcal{G(\lambda)}}
\newcommand{\GNI}{\mathcal{G}(\lambda_{i})}
\newcommand{\GNECSI}{\mathcal{G}(\LambdaECS_{i})}
%\newcommand{\GNECS}{\mathcal{G(\tilde{\lambda})}}
%\newcommand{\GEN}{Generalized Norm}
\newcommand{\GEN}{Norm Generating Function}
%\newcommand{\EPSL}{\epsilon_\mathcal{L}}




\newcommand{\OVERLAP}{\mathbf{R}}
\newcommand{\OLAPTOLAP}{{\OVERLAP}^{\TR}\OVERLAP}
\newcommand{\OLAPSQD}{\Trace{\mathbf{R}^{\TR}\mathbf{R}}}
\newcommand{\THRMAVGIZ}[1]{\left\langle #1 \right\rangle_{\mathbf S}^{\beta}}
\newcommand{\THRMAVG}[1]{\left\langle #1 \right\rangle_{\mathbf s}^{\beta}}
\newcommand{\THRMAVGw}[1]{\left\langle #1 \right\rangle_{\mathbf w}^{\beta}}
\newcommand{\HCIZAVG}[1]{\left\langle #1 \right\rangle_{\mathbf S}^{IZ}}
\newcommand{\ZQ}{Z_{\mathcal{Q}}^{IZ}}

% ECS superscript--deprecated
\newcommand{\EFF}{ecs}
% HCIZ Tanaka style avarage:  uses \AECS, below
%\newcommand{\HCIZ}{\mathbb{E}_{\tilde{\mathbf{A}}}[\cdots]}
%\newcommand{\HCIZ}{\mathbb{Z}^{IZ}(\mathbf{A})}
\newcommand{\HCIZ}{\mathbb{Z}^{IZ}}
%
\newcommand{\NDX}{\mathbf{x}^{n}}

% model training and generalization error
% averagess
\newcommand{\AVGE}{\bar{\mathcal{E}}}
\newcommand{\AVGTE}{\bar{\mathcal{E}}_{train}}
\newcommand{\AVGGE}{\bar{\mathcal{E}}_{gen}}

%  duplicates from below--need to clean up
\newcommand{\MTE}{\bar{\mathcal{E}}^{M}_{train}}
\newcommand{\MGE}{\bar{\mathcal{E}}^{M}_{gen}}

% totals
\newcommand{\TTE}{{\mathcal{E}}_{train}}
\newcommand{\TGE}{{\mathcal{E}}_{gen}}

% student-teacher training and generalization error
\newcommand{\STTE}{{\mathcal{E}}^{ST}_{train}}
\newcommand{\STGE}{{\mathcal{E}}^{ST}_{gen}}
\newcommand{\AVGSTTE}{\bar{\mathcal{E}}^{ST}_{train}}
\newcommand{\AVGSTGE}{\bar{\mathcal{E}}^{ST}_{gen}}

% neural network training and generalization error      
\newcommand{\NNTE}{{\mathcal{E}}^{NN}_{train}}
\newcommand{\NNGE}{{\mathcal{E}}^{NN}_{gen}}
\newcommand{\AVGNNTE}{\bar{\mathcal{E}}^{NN}_{train}}
\newcommand{\AVGNNGE}{\bar{\mathcal{E}}^{NN}_{gen}}

% empirical training and generalization error      
\newcommand{\EMPTE}{{\mathcal{E}}^{emp}_{train}}
\newcommand{\EMPGE}{{\mathcal{E}}^{emp}_{gen}}
\newcommand{\AVGEMPTE}{\bar{\mathcal{E}}^{emp}_{train}}
\newcommand{\AVGEMPGE}{\bar{\mathcal{E}}^{emp}_{gen}}

%actual data

%  data variables
\newcommand{\Ntrain}{N^{train}}
\newcommand{\Ntest}{N^{test}}
\newcommand{\DX}{\mathbf{x}}
\newcommand{\DXtrain}{\mathbf{x}^{train}}
\newcommand{\DXtest}{\mathbf{x}^{test}}
\newcommand{\DATA}{\mathbf{x}_{\mu}}
\newcommand{\DATAtrain}{\mathbf{x}_{\mu}^{train}}
\newcommand{\DATAtest}{\mathbf{x}_{\mu}^{test}}

% teacher and student labels
\newcommand{\MY}{\mathrm{y}}

\newcommand{\Ys}{\MY_{\mu}^{S}}
\newcommand{\Yt}{\MY_{\mu}^{T}}
\newcommand{\Ytrue}{\MY_{\mu}^{true}}
\newcommand{\Ytrain}{\MY_{\mu}^{train}}
\newcommand{\Ytest}{\MY_{\mu}^{test}}
\newcommand{\YsVEC}{\mathbf{y}^{S}}
\newcommand{\YtVEC}{\mathbf{y}^{T}}
\newcommand{\Ymu}{\MY_{\mu}}

%model Gaussian data
\newcommand{\XI}{\boldsymbol{\xi}}
\newcommand{\XImu}{\boldsymbol{\xi}_{\mu}}
\newcommand{\NDXI}{\boldsymbol{\xi}^{N}}
\newcommand{\NDXIn}{\boldsymbol{\xi}^{n}}
\newcommand{\NDXIinfty}{\boldsymbol{\xi}^{\infty}}

\newcommand{\XItest}{\boldsymbol{\xi}^{test}}
\newcommand{\XItrain}{\boldsymbol{\xi}^{train}}
\newcommand{\XImutest}{\boldsymbol{\xi}_{\mu}^{test}}
\newcommand{\XImutrain}{\boldsymbol{\xi}_{\mu}^{train}}
\newcommand{\NDXItest}{[\boldsymbol{\xi}^{test}]^{N}}
\newcommand{\NDXItrain}{[\boldsymbol{\xi}^{train}]^{N}}

% Perceptron vectors
\newcommand{\SVEC}{{\mathbf{s}}}
\newcommand{\TVEC}{{\mathbf{t}}}
\newcommand{\WVEC}{{\mathbf{w}}}
\newcommand{\XVEC}{{\mathbf{x}}}
\newcommand{\YVEC}{{\mathbf{y}}}

% Data Averaged ST Error: uses \SVEC, \TVEC, etc
\newcommand{\EPSL}{\epsilon}
\newcommand{\EPSLR}{\epsilon(R)}
% Total and  Data-Averaged ST Error: explicit:  uses other defintsions
\newcommand{\EPSLSTw}{\epsilon(\WVEC)}
\newcommand{\EPSLw}{\epsilon(\WVEC)}
\newcommand{\ETOTSTx}{\mathcal{E}(\SVEC, \TVEC )}
\newcommand{\EPSLSTx}{\epsilon(\SVEC, \TVEC )}
\newcommand{\ETOTST}{\mathcal{E}(\SVEC, \TVEC )}
\newcommand{\EPSLST}{\epsilon(\SVEC, \TVEC )}

%  Data Averaged NN Error: explicit \SMAT, \TMAT, \NDXI
\newcommand{\ETOTNN}{\mathcal{E}(\mathbf{S}, \mathbf{T}| \NDXI)}
\newcommand{\EPSLNN}{\epsilon(\mathbf{S}, \mathbf{T})}

% Data Averaged ST Error (old version)
% deprecated
\newcommand{\DEEPS}{\epsilon(\mathbf{w})}
%\newcommand{\DEEPSX}{\epsilon(\mathbf{w}|\mathbf{x})}

\newcommand{\DET}{\Delta E_{\mathcal{L}}(\mathbf{w},\XI)}
\newcommand{\DETeff}{\Delta E^{eff}_{\mathcal{L}}(\mathbf{w},\XI)}
\newcommand{\DETST}{\Delta E_{\mathcal{L}}(\SVEC,\TVEC,\XI)}
\newcommand{\DETSTL}{\Delta E_{\mathcal{L}}(\SVEC,\TVEC,\XI)}
\newcommand{\DETOPSTL}{\mathbf{\Delta {E}}_{\mathcal{L}}(\SVEC,\TVEC,\XI)}
\newcommand{\DETOPSTx}{\mathbf{\Delta {E}}_{\mathcal{L}}(S,T,\DX)}
\newcommand{\DETSTLL}{\Delta E_{\ell_2}(\SVEC,\TVEC,\XI)}
\newcommand{\DETOP}{\mathbf{\Delta {E}}_{\mathcal{L}}(\mathbf{w})}
\newcommand{\DETOPX}{\mathbf{\Delta {E}}_{\mathcal{L}}(\mathbf{w}, \NDX)}
\newcommand{\DETOPXY}{\mathbf{\Delta {E}}_{\mathcal{L}}(\mathbf{w}, \NDX, \MY^{n})}
\newcommand{\DETOPXI}{\mathbf{\Delta {E}}_{\mathcal{L}}(\mathbf{w}, \XI^{n})}
\newcommand{\DETOPXILL}{\mathbf{\Delta {E}}_{\ell_2}(\mathbf{w}, \XI)^{n}}
\newcommand{\DETOPSTLL}{\mathbf{\Delta {E}}_{\ell_2}(\SVEC,\TVEC, \XI^{n})}
\newcommand{\DETOPST}{\mathbf{\Delta {E}}_{\ell_2}(\SMAT,\TMAT)}
\newcommand{\DETOPNN}{\mathbf{\Delta {E}}_{\ell_2}(\SMAT,\TMAT, \XI)}
\newcommand{\DETOPNNXI}{\mathbf{\Delta {E}}_{\ell_2}(\SMAT,\TMAT|\XI^{n})}
\newcommand{\DETOT}{\mathcal{E}(\mathbf{w})}
\newcommand{\DETOTXI}{\mathcal{E}(\mathbf{w}|\NDX)}
%deprecated
\newcommand{\DETOTX}{\mathcal{E}(\mathbf{w}|\mathbf{x}^{n})}
\newcommand{\DETOTXY}{\mathcal{E}(\mathbf{w}|\mathbf{x}^{n}, y^{n})}

% Data set size
\newcommand{\ND}{N}}

% Matrices
\newcommand{\SMAT}{{\mathbf{S}}}
\newcommand{\TMAT}{{\mathbf{T}}}
\newcommand{\WMAT}{{\mathbf{W}}}
\newcommand{\AECS}{\tilde{\mathbf{A}}}
\newcommand{\WECS}{\tilde{\mathbf{W}}}
\newcommand{\XECS}{\tilde{\mathbf{X}}}
\newcommand{\TECS}{\tilde{\mathbf{T}}}
\newcommand{\LambdaECS}{\tilde{\lambda}}
\newcommand{\LambdaECSmin}{\lambda^{ECS}_{min}}
\newcommand{\LambdaPLmin}{\lambda^{PL}_{min}}

\newcommand{\MECS}{\tilde{M}}
\newcommand{\kECS}{\tilde{k}}

\newcommand{\AMAT}{\mathbf{A}}
\newcommand{\AHAT}{\hat{\mathbf{A}}}

\newcommand{\BMAT}{\mathbf{B}}
\newcommand{\XMAT}{\mathbf{X}}
\newcommand{\DMAT}{\mathbf{D}}

%Annealed Hamiltonian
\newcommand{\GAN}{H^{an}(\WVEC)}
\newcommand{\HAN}{H^{an}}
\newcommand{\GANR}{H^{an}(R)}
\newcommand{\GANMAT}{H^{an}(\mathbf{R})}
\newcommand{\GANHT}{H^{an}_{hT}(\WVEC)}
\newcommand{\GANHTR}{H^{an}_{hT}(R)}
\newcommand{\GANMATHT}{H^{an}_{hT}(\mathbf{R})}
\newcommand{\HANHT}{H^{an}_{hT}}
\newcommand{\HEFF}{\mathbf{H}^{ECS}_{\QT}}
\newcommand{\HBARE}{\mathbf{H}_{\QT}}
\newcommand{\HANPP}{h^{an}(\OVERLAP)}
\newcommand{\HANPPHT}{H^{an}_{hT}(\OVERLAP)}

%Data Distributions
\newcommand{\ADD}{\mathbf{D}}
\newcommand{\MDD}{\mathcal{D}}

\newcommand{\XINORM}{\mathcal{N}}

% High T Annealed Approximation
\newcommand{\ZAN}{Z^{an}_{n}}
\newcommand{\ZHT}{Z^{hT}_{n}}
\newcommand{\ZANHT}{Z^{an,hT}_{n}}

% Hamiltonian
\newcommand{\HH}{\mathbf{H}}

% Replica averages 
\newcommand{\REPLICA}{[\mathbf{\XI}^{n}]_{r}}
\newcommand{\DEREPLICA}{\mathcal{E}(\mathbf{w}|[\mathbf{\XI}^{n}]_{r})}

% TraceLog Integrals and Normalizaton
\newcommand{\INTA}{\int_{\mathbf{A}}}
\newcommand{\INTS}{\int_{\SMAT}}
\newcommand{\INTsvec}{\int_{\SVEC}}
\newcommand{\INTAHAT}{\int_{\AHAT}}
\newcommand{\INTiAHAT}{\int_{i\AHAT}}

\newcommand{\XHAT}{\hat{\mathbf{X}}}

\newcommand{\NORM}{\mathcal{N}}

\newcommand{\GNORM}{\mathbb{G}_{\AMAT}}
\newcommand{\GMAX}{\mathcal{G}^{max}}
\newcommand{\GFANCY}{\mathcal{G}(\XMAT)}
\newcommand{\ZIZ}{\mathbb{Z}^{IZ}}
\newcommand{\ZD}{\mathbb{Z}^{IZ}}
%\newcommand{\ZD}{\mathbb{Z}(\mathbf{D})}
\newcommand{\EZDA}{\mathbb{E}_{\AMAT}[\ZIZ]}
\newcommand{\EZDX}{\mathbb{E}_{\XMAT}[\ZIZ]}
\newcommand{\EZDW}{\mathbb{E}_{\WMAT}[\ZIZ]}
\newcommand{\EZDAONE}{\mathbb{E}_{\mathbf{A}_1}[\ZIZ]}
\newcommand{\EZDATWO}{\mathbb{E}_{\mathbf{A}_2}[\ZIZ]}

\newcommand{\EQN}{Eqn.}
\newcommand{\Det}[1]{\mbox{}{\text{det}}\left(#1\right)}
%\newcommand{\DeltaMu}{\delta_{\mu}}
\newcommand{\DeltaMu}{\vartheta_{\mu}}
\newcommand{\IM}{\mathbf{I}_{M}} % identity operator
\newcommand{\IH}{\mathbb{I}_{H}} % integral
\newcommand{\DETX}{\texttt{DetX}\xspace}
\newcommand{\ETA}{\eta\xspace}
\newcommand{\ETAw}{\eta(\WVEC)\xspace}
%\newcommand{\ETAMLP}{\eta(\XI)_{MLP3}\xspace}
\newcommand{\ETAMLPXI}{\eta([\SMAT_l,\TMAT_l],\XI)\xspace}
\newcommand{\ETAMLPAVG}{\langle\eta([\SMAT_l,\TMAT_l],\XI)\rangle_{\XI}\xspace}
\newcommand{\ETAMLP}{\eta([\SMAT_l,\TMAT_l])\xspace}
\newcommand{\ETAMAT}{\eta(\SMAT_l,\TMAT_l,\XI)\xspace}
\newcommand{\ETAMATAVG}{\langle\eta(\SMAT_l,\TMAT_l,\XI)\rangle_{\XI}\xspace}
